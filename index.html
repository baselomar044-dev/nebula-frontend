<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AI</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div id="app">
    <!-- Top Bar -->
    <header>
      <div class="left">
        <button onclick="toggle('files')" title="Files">‚ò∞</button>
        <select id="projectSelect" onchange="loadProject(this.value)">
          <option value="new">+ New Project</option>
        </select>
      </div>
      <span class="logo">AI</span>
      <div class="right">
        <button onclick="modal('import')" title="Import">‚Üì</button>
        <button onclick="exportAll()" title="Export">‚Üë</button>
        <button onclick="modal('deploy')" title="Deploy">‚ö°</button>
        <button onclick="modal('settings')" title="Settings">‚öô</button>
        <button onclick="toggle('preview')" title="Preview">‚óß</button>
      </div>
    </header>

    <!-- Workspace -->
    <main>
      <!-- Files Panel -->
      <aside id="files" class="panel">
        <div class="panel-head">
          <span>Files</span>
          <div>
            <button onclick="newFile()">+</button>
            <button onclick="newFolder()">üìÅ</button>
            <button onclick="toggle('files')">√ó</button>
          </div>
        </div>
        <div id="tree"></div>
      </aside>

      <!-- Chat Area -->
      <section id="chat">
        <div id="msgs"></div>
        <div id="attachList"></div>
        <div class="input-row">
          <label class="attach">
            <input type="file" multiple onchange="attach(this.files)" hidden>üìé
          </label>
          <textarea id="input" placeholder="What do you want to build?" rows="1"></textarea>
          <button onclick="send()">‚û§</button>
        </div>
      </section>

      <!-- Preview Panel -->
      <aside id="preview" class="panel right">
        <div class="panel-head">
          <span>Preview</span>
          <div>
            <button onclick="runPreview()">‚ñ∂</button>
            <button onclick="expand()">‚õ∂</button>
            <button onclick="toggle('preview')">√ó</button>
          </div>
        </div>
        <div class="preview-tabs">
          <button class="active" onclick="showTab('frame')">Live</button>
          <button onclick="showTab('html')">HTML</button>
          <button onclick="showTab('css')">CSS</button>
          <button onclick="showTab('js')">JS</button>
          <button onclick="showTab('log')">Log</button>
        </div>
        <iframe id="frame"></iframe>
        <pre id="codeView"></pre>
        <div id="log"></div>
      </aside>
    </main>
  </div>

  <!-- Settings Modal -->
  <div id="settings" class="modal">
    <div class="box">
      <div class="head"><span>Settings</span><button onclick="modal('settings')">√ó</button></div>
      <label>Model<select id="model">
        <option value="claude">Claude</option>
        <option value="gpt-4">GPT-4</option>
        <option value="gemini">Gemini</option>
        <option value="groq">Groq</option>
      </select></label>
      <label>Temp <input type="range" id="temp" min="0" max="1" step="0.1" value="0.7"></label>
      <label><input type="checkbox" id="autoRun" checked> Auto-run preview</label>
      <button onclick="saveSettings()">Save</button>
    </div>
  </div>

  <!-- Deploy Modal -->
  <div id="deploy" class="modal">
    <div class="box">
      <div class="head"><span>Deploy</span><button onclick="modal('deploy')">√ó</button></div>
      <label>Platform<select id="platform">
        <option value="netlify">Netlify</option>
        <option value="vercel">Vercel</option>
      </select></label>
      <label>Name<input type="text" id="deployName" placeholder="my-project"></label>
      <button onclick="doDeploy()">üöÄ Deploy</button>
      <div id="deployOut"></div>
    </div>
  </div>

  <!-- Import Modal -->
  <div id="import" class="modal">
    <div class="box">
      <div class="head"><span>Import</span><button onclick="modal('import')">√ó</button></div>
      <div class="import-opts">
        <label><input type="file" accept=".zip" onchange="importZip(this.files[0])" hidden><div>üì¶ ZIP</div></label>
        <label><input type="file" multiple onchange="importFiles(this.files)" hidden><div>üìÑ Files</div></label>
      </div>
      <input type="text" id="ghUrl" placeholder="GitHub URL">
      <button onclick="importGH()">Import from GitHub</button>
    </div>
  </div>

  <!-- Fullscreen Preview -->
  <div id="full" class="modal full">
    <div class="full-box">
      <div class="head"><span>Preview</span><button onclick="modal('full')">√ó</button></div>
      <iframe id="fullFrame"></iframe>
    </div>
  </div>

  <!-- Editor Modal -->
  <div id="editor" class="modal">
    <div class="box wide">
      <div class="head"><span id="editName">Edit</span><button onclick="modal('editor')">√ó</button></div>
      <textarea id="code"></textarea>
      <button onclick="saveFile()">Save</button>
    </div>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
  <script src="app.js"></script>
</body>
</html>
