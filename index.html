<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta name="theme-color" content="#0a0a0f">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <title>AI - Code Assistant</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Fira+Code:wght@400;500&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <!-- Mobile Header -->
  <header class="mobile-header">
    <button class="mobile-btn" id="mobileFilesBtn" title="Files">â˜°</button>
    <span class="logo">AI</span>
    <div class="mobile-actions">
      <button class="mobile-btn" id="mobileSettingsBtn" title="Settings">âš™</button>
      <button class="mobile-btn" id="mobilePreviewBtn" title="Preview">â—§</button>
    </div>
  </header>

  <!-- Panel Overlay (for mobile) -->
  <div class="panel-overlay" id="panelOverlay"></div>

  <div class="app">
    <!-- Files Panel -->
    <aside class="files-panel" id="filesPanel">
      <div class="panel-header">
        <h3>ğŸ“ Files</h3>
        <button class="panel-close" id="closeFilesBtn">âœ•</button>
      </div>
      <div class="file-actions">
        <button onclick="createFile()">+ New</button>
        <button onclick="importProject()">â†“ Import</button>
        <button onclick="exportProject()">â†‘ Export</button>
      </div>
      <div class="file-list" id="fileList"></div>
    </aside>

    <!-- Main Chat Area -->
    <main class="main-area">
      <!-- Desktop Top Bar -->
      <div class="top-bar">
        <div class="left">
          <button class="toggle-btn" onclick="toggleFiles()" title="Files">â˜°</button>
          <span class="logo">AI</span>
        </div>
        <div class="right">
          <button onclick="openGitModal()">â‡ Git</button>
          <button onclick="openDbPanel()">ğŸ—„ Database</button>
          <button onclick="toggleTerminal()">âŒ¨ Terminal</button>
          <button onclick="openSettings()">âš™ Settings</button>
          <button class="toggle-btn" onclick="togglePreview()" title="Preview">â—§</button>
        </div>
      </div>

      <!-- Chat Messages -->
      <div class="chat-container" id="chatContainer">
        <div class="message ai">
          ğŸ‘‹ Hi! I'm your AI coding assistant. I can help you build anything - websites, apps, APIs, databases. Just describe what you want!
        </div>
      </div>

      <!-- Model Selector -->
      <div class="model-selector">
        <select id="providerSelect">
          <option value="auto">ğŸ¤– Auto</option>
          <option value="anthropic">Claude</option>
          <option value="openai">OpenAI</option>
          <option value="groq">Groq</option>
          <option value="gemini">Gemini</option>
        </select>
        <select id="modelSelect">
          <option value="auto">Auto-select</option>
        </select>
        <label class="auto-model">
          <input type="checkbox" id="autoModel" checked> Smart model selection
        </label>
      </div>

      <!-- Input Area -->
      <div class="input-area">
        <div class="input-wrapper">
          <textarea 
            id="userInput" 
            placeholder="Describe what you want to build..." 
            rows="1"
            onkeydown="handleKeyDown(event)"
          ></textarea>
          <div class="input-actions">
            <button class="attach-btn" onclick="attachFile()" title="Attach file">ğŸ“</button>
            <button class="send-btn" id="sendBtn" onclick="sendMessage()">â¤</button>
          </div>
        </div>
      </div>

      <!-- Terminal Panel -->
      <div class="terminal-panel" id="terminalPanel">
        <div class="terminal-header">
          <span>Terminal</span>
          <button onclick="toggleTerminal()" style="background:none;border:none;color:var(--text);cursor:pointer;">âœ•</button>
        </div>
        <div class="terminal-output" id="terminalOutput"></div>
        <div class="terminal-input">
          <span>$</span>
          <input type="text" id="terminalInput" placeholder="Enter command..." onkeydown="handleTerminalKey(event)">
        </div>
      </div>
    </main>

    <!-- Preview Panel -->
    <aside class="preview-panel" id="previewPanel">
      <div class="auto-fix-banner" id="autoFixBanner">
        <span>âš ï¸ Errors detected in preview</span>
        <button onclick="autoFixErrors()">ğŸ”§ Auto-fix</button>
      </div>
      <div class="preview-tabs">
        <button class="active" onclick="switchTab('live')">Live</button>
        <button onclick="switchTab('html')">HTML</button>
        <button onclick="switchTab('css')">CSS</button>
        <button onclick="switchTab('js')">JS</button>
        <button onclick="switchTab('console')">Console</button>
        <div class="preview-actions">
          <button onclick="toggleExpandPreview()" title="Expand">â›¶</button>
          <button onclick="deployProject()" title="Deploy">âš¡</button>
          <button class="panel-close" id="closePreviewBtn" onclick="togglePreview()">âœ•</button>
        </div>
      </div>
      <div class="preview-content" id="previewContent">
        <iframe id="previewFrame" sandbox="allow-scripts allow-modals"></iframe>
      </div>
    </aside>
  </div>

  <!-- Settings Modal -->
  <div class="settings-modal" id="settingsModal">
    <div class="settings-header">
      <h3>âš™ Settings</h3>
      <button onclick="closeSettings()" style="background:none;border:none;color:var(--text);cursor:pointer;font-size:20px;">âœ•</button>
    </div>
    <div class="settings-content">
      <label>GitHub Token (for Git features)</label>
      <input type="password" id="githubToken" placeholder="ghp_...">
      <label>Netlify Token (for deployments)</label>
      <input type="password" id="netlifyToken" placeholder="nfp_...">
      <label>Default Provider</label>
      <select id="defaultProvider" style="width:100%;padding:12px;margin-bottom:16px;background:var(--bg);border:1px solid var(--border);color:var(--text);border-radius:8px;">
        <option value="auto">Auto (Smart Selection)</option>
        <option value="anthropic">Claude</option>
        <option value="openai">OpenAI</option>
        <option value="groq">Groq (Fast)</option>
        <option value="gemini">Gemini</option>
      </select>
      <button onclick="saveSettings()">Save Settings</button>
    </div>
  </div>

  <!-- Git Modal -->
  <div class="git-modal" id="gitModal">
    <div class="git-header">
      <h3>â‡ Git</h3>
      <button onclick="closeGitModal()" style="background:none;border:none;color:var(--text);cursor:pointer;font-size:20px;">âœ•</button>
    </div>
    <div class="git-content">
      <div class="git-tabs">
        <button class="active" onclick="switchGitTab('import')">Import</button>
        <button onclick="switchGitTab('push')">Push</button>
      </div>
      <div id="gitImportTab">
        <input type="text" id="gitRepoUrl" placeholder="GitHub repo URL (e.g., owner/repo)">
        <button class="git-action" onclick="importFromGit()">Import Repository</button>
      </div>
      <div id="gitPushTab" style="display:none;">
        <input type="text" id="gitPushRepo" placeholder="Repository (e.g., owner/repo)">
        <input type="text" id="gitCommitMsg" placeholder="Commit message">
        <button class="git-action" onclick="pushToGit()">Push to GitHub</button>
      </div>
    </div>
  </div>

  <!-- Database Panel -->
  <div class="db-panel" id="dbPanel">
    <div class="db-header">
      <h3>ğŸ—„ Database</h3>
      <button onclick="closeDbPanel()" style="background:none;border:none;color:var(--text);cursor:pointer;font-size:20px;">âœ•</button>
    </div>
    <div class="db-content">
      <textarea id="sqlQuery" placeholder="Enter SQL query...&#10;Example: CREATE TABLE users (id INTEGER PRIMARY KEY, name TEXT)"></textarea>
      <button onclick="executeSQL()">â–¶ Run Query</button>
      <div class="db-results" id="dbResults"></div>
    </div>
  </div>

  <!-- Toast -->
  <div class="toast" id="toast"></div>

  <!-- Hidden file input -->
  <input type="file" id="fileInput" style="display:none" multiple onchange="handleFileUpload(event)">
  <input type="file" id="importInput" style="display:none" accept=".zip,.json" onchange="handleImport(event)">

  <script src="app.js"></script>
</body>
</html>
