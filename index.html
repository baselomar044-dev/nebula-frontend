<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AI</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <!-- Header -->
  <header>
    <div class="header-left">
      <button class="icon-btn" onclick="togglePanel('left')" title="Files (Ctrl+B)">â˜°</button>
      <span class="logo">AI</span>
    </div>
    <div class="header-center">
      <select id="modelSelect" onchange="saveSettings()">
        <option value="auto">ðŸ¤– Auto (Smart Select)</option>
        <optgroup label="Claude">
          <option value="anthropic/claude-3-5-sonnet-20241022">Claude 3.5 Sonnet</option>
          <option value="anthropic/claude-3-haiku-20240307">Claude 3 Haiku</option>
        </optgroup>
        <optgroup label="OpenAI">
          <option value="openai/gpt-4o">GPT-4o</option>
          <option value="openai/gpt-4o-mini">GPT-4o Mini</option>
        </optgroup>
        <optgroup label="Groq">
          <option value="groq/llama-3.3-70b-versatile">Llama 3.3 70B</option>
          <option value="groq/llama-3.1-8b-instant">Llama 3.1 8B</option>
        </optgroup>
        <optgroup label="Google">
          <option value="google/gemini-1.5-pro">Gemini 1.5 Pro</option>
          <option value="google/gemini-1.5-flash">Gemini 1.5 Flash</option>
        </optgroup>
      </select>
    </div>
    <div class="header-right">
      <button class="icon-btn" onclick="importFromGit()" title="Git Import">âŽ‡</button>
      <button class="icon-btn" onclick="importProject()" title="Import">â†“</button>
      <button class="icon-btn" onclick="exportProject()" title="Export">â†‘</button>
      <button class="icon-btn" onclick="deployProject()" title="Deploy">âš¡</button>
      <button class="icon-btn" onclick="showModal('settingsModal')" title="Settings">âš™</button>
      <button class="icon-btn" onclick="togglePanel('right')" title="Preview (Ctrl+P)">â—§</button>
    </div>
  </header>

  <!-- Main Layout -->
  <main>
    <!-- Left Panel - Files -->
    <aside id="leftPanel" class="panel left">
      <div class="panel-header">
        <span>Files</span>
        <div>
          <button class="small-btn" onclick="createFile()" title="New File">+</button>
          <button class="small-btn" onclick="attachFile()" title="Upload">ðŸ“Ž</button>
          <button class="small-btn" onclick="clearProject()" title="Clear">ðŸ—‘</button>
        </div>
      </div>
      <div id="fileList" class="file-list"></div>
      <div class="panel-section">
        <div class="section-title">Quick Actions</div>
        <button class="action-btn" onclick="importFromGit()">âŽ‡ Import from GitHub</button>
        <button class="action-btn" onclick="pushToGit()">â†‘ Push to GitHub</button>
        <button class="action-btn" onclick="showModal('dbModal')">ðŸ—„ Database</button>
        <button class="action-btn" onclick="showModal('terminalModal')">âŒ¨ Terminal</button>
      </div>
    </aside>

    <!-- Center - Chat -->
    <section class="chat-area">
      <div id="chatMessages" class="chat-messages"></div>
      <div class="chat-input-area">
        <textarea id="chatInput" placeholder="Ask me to build anything..." rows="1"></textarea>
        <button class="send-btn" onclick="sendMessage()">Send</button>
      </div>
    </section>

    <!-- Right Panel - Preview -->
    <aside id="rightPanel" class="panel right">
      <div class="panel-header">
        <span>Preview</span>
        <div>
          <button class="small-btn" onclick="updatePreview()" title="Refresh">â†»</button>
          <button class="small-btn" onclick="expandPreview()" title="Expand">â›¶</button>
        </div>
      </div>
      <div class="preview-tabs">
        <button class="preview-tab active" onclick="switchPreviewTab('live')">Live</button>
        <button class="preview-tab" onclick="switchPreviewTab('html')">HTML</button>
        <button class="preview-tab" onclick="switchPreviewTab('css')">CSS</button>
        <button class="preview-tab" onclick="switchPreviewTab('js')">JS</button>
        <button class="preview-tab" onclick="switchPreviewTab('console')">Console</button>
      </div>
      <div id="previewContent" class="preview-content">
        <iframe id="previewFrame" sandbox="allow-scripts allow-modals"></iframe>
      </div>
    </aside>
  </main>

  <!-- Settings Modal -->
  <div id="settingsModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h3>Settings</h3>
        <button onclick="closeModal('settingsModal')">Ã—</button>
      </div>
      <div class="modal-body">
        <div class="setting-group">
          <label>GitHub Token</label>
          <input type="password" id="githubToken" placeholder="ghp_...">
          <small>For Git push/pull features</small>
        </div>
        <div class="setting-group">
          <label>Default Model</label>
          <select id="modelSelectSetting">
            <option value="auto">Auto (Smart Selection)</option>
            <option value="anthropic/claude-3-5-sonnet-20241022">Claude 3.5 Sonnet</option>
            <option value="groq/llama-3.3-70b-versatile">Llama 3.3 70B (Fast)</option>
            <option value="openai/gpt-4o">GPT-4o</option>
          </select>
        </div>
        <div class="setting-group">
          <label class="checkbox-label">
            <input type="checkbox" id="autoPreview" checked>
            Auto-update preview
          </label>
        </div>
        <div class="setting-group">
          <label class="checkbox-label">
            <input type="checkbox" id="autoFix" checked>
            Auto-fix errors in preview
          </label>
        </div>
        <div class="setting-group">
          <label class="checkbox-label">
            <input type="checkbox" id="streaming" checked>
            Enable streaming responses
          </label>
        </div>
      </div>
      <div class="modal-footer">
        <button onclick="saveSettings()">Save</button>
      </div>
    </div>
  </div>

  <!-- Deploy Modal -->
  <div id="deployModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h3>Deploy Project</h3>
        <button onclick="closeModal('deployModal')">Ã—</button>
      </div>
      <div class="modal-body">
        <button class="deploy-btn netlify" onclick="deployToNetlify()">
          <span class="deploy-icon">â–²</span>
          Deploy to Netlify
        </button>
        <button class="deploy-btn vercel" onclick="deployToVercel()">
          <span class="deploy-icon">â–²</span>
          Deploy to Vercel
        </button>
        <button class="deploy-btn github" onclick="pushToGit()">
          <span class="deploy-icon">âŽ‡</span>
          Push to GitHub
        </button>
      </div>
    </div>
  </div>

  <!-- Database Modal -->
  <div id="dbModal" class="modal">
    <div class="modal-content wide">
      <div class="modal-header">
        <h3>ðŸ—„ Database</h3>
        <button onclick="closeModal('dbModal')">Ã—</button>
      </div>
      <div class="modal-body">
        <div class="db-layout">
          <div class="db-sidebar">
            <div class="section-title">Tables</div>
            <div id="tableList" class="table-list">
              <div class="no-tables">No tables yet</div>
            </div>
            <div class="db-templates">
              <div class="section-title">Quick Templates</div>
              <button onclick="$('sqlInput').value='CREATE TABLE users (id INTEGER PRIMARY KEY, name TEXT, email TEXT, created_at DATETIME DEFAULT CURRENT_TIMESTAMP)'">Users Table</button>
              <button onclick="$('sqlInput').value='CREATE TABLE posts (id INTEGER PRIMARY KEY, title TEXT, content TEXT, user_id INTEGER, created_at DATETIME DEFAULT CURRENT_TIMESTAMP)'">Posts Table</button>
              <button onclick="$('sqlInput').value='CREATE TABLE products (id INTEGER PRIMARY KEY, name TEXT, price REAL, stock INTEGER)'">Products Table</button>
            </div>
          </div>
          <div class="db-main">
            <textarea id="sqlInput" placeholder="Enter SQL query...">SELECT * FROM sqlite_master WHERE type='table';</textarea>
            <button class="run-btn" onclick="runQuery()">â–¶ Run Query</button>
            <div id="dbOutput" class="db-output"></div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Terminal Modal -->
  <div id="terminalModal" class="modal">
    <div class="modal-content wide">
      <div class="modal-header">
        <h3>âŒ¨ Terminal</h3>
        <button onclick="closeModal('terminalModal')">Ã—</button>
      </div>
      <div class="modal-body">
        <div id="terminalOutput" class="terminal-output"></div>
        <div class="terminal-input-area">
          <span class="prompt">$</span>
          <input type="text" id="terminalInput" placeholder="Enter command..." onkeydown="if(event.key==='Enter')runTerminalCommand()">
        </div>
      </div>
    </div>
  </div>

  <!-- Editor Modal -->
  <div id="editorModal" class="modal">
    <div class="modal-content wide">
      <div class="modal-header">
        <h3 id="editorFileName">File</h3>
        <button onclick="closeModal('editorModal')">Ã—</button>
      </div>
      <div class="modal-body">
        <textarea id="codeEditor" class="code-editor" spellcheck="false"></textarea>
      </div>
      <div class="modal-footer">
        <button onclick="saveCurrentFile(); closeModal('editorModal')">Save & Close</button>
      </div>
    </div>
  </div>

  <script src="app.js"></script>
</body>
</html>
