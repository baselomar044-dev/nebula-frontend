<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>AI</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <!-- Files Panel (Left) -->
  <div id="filesPanel" class="panel left-panel">
    <div class="panel-header">
      <h3>üìÅ Files</h3>
      <button class="icon-btn" onclick="createFile()" title="New File">+</button>
    </div>
    <div id="filesList" class="files-list"></div>
    <div class="panel-actions">
      <button onclick="gitImport()" title="Import from GitHub">‚éá Git Import</button>
      <button onclick="runSQL()" title="Run SQL Query">üóÑÔ∏è Database</button>
    </div>
  </div>

  <!-- Main Chat Area -->
  <div class="main-area">
    <!-- Header -->
    <header class="header">
      <button class="icon-btn mobile-only" onclick="toggleFiles()" title="Files">‚ò∞</button>
      <h1>AI</h1>
      <div class="header-actions">
        <select id="modelSelect" class="model-select" title="Select AI Model">
          <option value="auto">ü§ñ Auto</option>
          <optgroup label="Claude (Anthropic)">
            <option value="anthropic/claude-sonnet-4-20250514">Claude Sonnet 4</option>
            <option value="anthropic/claude-3-haiku-20240307">Claude Haiku (Fast)</option>
          </optgroup>
          <optgroup label="OpenAI">
            <option value="openai/gpt-4o">GPT-4o</option>
            <option value="openai/gpt-4o-mini">GPT-4o Mini (Fast)</option>
          </optgroup>
        </select>
        <button class="icon-btn" onclick="toggleSettings()" title="Settings">‚öôÔ∏è</button>
        <button class="icon-btn" onclick="importProject()" title="Import">‚Üì</button>
        <button class="icon-btn" onclick="exportProject()" title="Export">‚Üë</button>
        <button class="icon-btn" onclick="deployProject()" title="Deploy">‚ö°</button>
        <button class="icon-btn mobile-only" onclick="togglePreview()" title="Preview">‚óß</button>
      </div>
    </header>

    <!-- Chat Messages -->
    <div id="chatMessages" class="chat-messages">
      <div class="message assistant">
        <div class="message-icon">ü§ñ</div>
        <div class="message-content">Ready to build! Select a model above and describe what you want to create.</div>
      </div>
    </div>

    <!-- Input Area -->
    <div class="input-area">
      <button class="icon-btn" onclick="attachFile()" title="Attach files">üìé</button>
      <textarea 
        id="userInput" 
        placeholder="Ask AI to build something..."
        rows="1"
        onkeydown="handleKeyDown(event)"
        oninput="autoResize(this)"
      ></textarea>
      <button class="send-btn" onclick="sendMessage()" title="Send">‚û§</button>
    </div>
  </div>

  <!-- Preview Panel (Right) -->
  <div id="previewPanel" class="panel right-panel">
    <div class="panel-header">
      <h3>Preview</h3>
      <div class="preview-controls">
        <button class="icon-btn" onclick="expandPreview()" title="Expand">‚õ∂</button>
        <button class="icon-btn" onclick="refreshPreview()" title="Refresh">‚Üª</button>
      </div>
    </div>
    <div class="preview-tabs">
      <button class="tab active" onclick="switchTab('live')">Live</button>
      <button class="tab" onclick="switchTab('html')">HTML</button>
      <button class="tab" onclick="switchTab('css')">CSS</button>
      <button class="tab" onclick="switchTab('js')">JS</button>
      <button class="tab" onclick="switchTab('console')">Console</button>
    </div>
    <div id="previewContent" class="preview-content">
      <iframe id="previewFrame" sandbox="allow-scripts allow-modals"></iframe>
      <pre id="codeView" class="code-view" style="display:none"></pre>
      <div id="consoleView" class="console-view" style="display:none"></div>
    </div>
    <div id="errorBar" class="error-bar" style="display:none">
      <span id="errorText">‚ö†Ô∏è Error detected</span>
      <button onclick="autoFix()">Auto Fix</button>
    </div>
  </div>

  <!-- Settings Modal -->
  <div id="settingsModal" class="modal" style="display:none">
    <div class="modal-content">
      <div class="modal-header">
        <h3>‚öôÔ∏è Settings</h3>
        <button class="icon-btn" onclick="toggleSettings()">√ó</button>
      </div>
      <div class="modal-body">
        <label>Theme</label>
        <select id="themeSelect">
          <option value="dark">Dark (Blue/Black)</option>
          <option value="light">Light</option>
        </select>
        <label>AI Model</label>
        <select id="settingsModel">
          <option value="auto">Auto (Smart Selection)</option>
          <option value="anthropic/claude-sonnet-4-20250514">Claude Sonnet 4 (Best)</option>
          <option value="anthropic/claude-3-haiku-20240307">Claude Haiku (Fast)</option>
          <option value="openai/gpt-4o">GPT-4o (Best)</option>
          <option value="openai/gpt-4o-mini">GPT-4o Mini (Fast)</option>
        </select>
        <label>Auto-Fix Errors</label>
        <select id="autoFixSetting">
          <option value="prompt">Ask First</option>
          <option value="auto">Automatic</option>
          <option value="off">Off</option>
        </select>
      </div>
    </div>
  </div>

  <!-- Expanded Preview Modal -->
  <div id="expandedModal" class="modal expanded-modal" style="display:none">
    <div class="modal-content full">
      <div class="modal-header">
        <h3>Preview</h3>
        <button class="icon-btn" onclick="closeExpanded()">√ó</button>
      </div>
      <iframe id="expandedFrame" sandbox="allow-scripts allow-modals"></iframe>
    </div>
  </div>

  <script src="app.js"></script>
</body>
</html>
